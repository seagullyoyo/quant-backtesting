2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 开始测试不同格式的股票代码和缓存功能
2025-05-17 19:24:34,395 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [__init__] 初始化数据API
2025-05-17 19:24:34,395 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [__init__] 初始化数据抓取器: AKShareFetcher, 数据源: akshare
2025-05-17 19:24:34,395 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [__init__] 初始化AKShare数据抓取器，请求频率限制: 200次/分钟
2025-05-17 19:24:34,395 [INFO] CSVStorage [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [__init__] 初始化 CSV 存储，数据目录: /Users/gang/Workspace/cursor-workspace/quant-backtrace/data
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 测试时间范围: 2025-04-17 至 2025-05-17
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 
===== 测试股票代码标准化 =====
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 原始代码: 000001 -> 标准化后: 000001.SZ
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 原始代码: 000001.SZ -> 标准化后: 000001.SZ
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 原始代码: sz000001 -> 标准化后: 000001.SZ
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 原始代码: 600000 -> 标准化后: 600000.SH
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 原始代码: 600000.SH -> 标准化后: 600000.SH
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 原始代码: sh600000 -> 标准化后: 600000.SH
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 
===== 测试缓存功能 =====
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 
测试股票对: 000001 和 000001.SZ
2025-05-17 19:24:34,395 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 第一次调用 - 使用 000001
2025-05-17 19:24:34,395 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 股票代码已标准化: 000001 -> 000001.SZ
2025-05-17 19:24:34,395 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 请求数据: symbols=['000001.SZ'], start_date=2025-04-17, end_date=2025-05-17, freq=daily, use_cache=True
2025-05-17 19:24:34,402 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 从数据源获取数据: symbols=['000001.SZ'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:34,402 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 开始获取股票数据: symbols=['000001.SZ'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:34,402 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 正在获取股票 000001.SZ 的daily数据，进度: 1/1
2025-05-17 19:24:34,487 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 000001.SZ 数据获取成功，记录数: 19
2025-05-17 19:24:34,795 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 全部数据获取完成，总记录数: 19, 股票数: 1
2025-05-17 19:24:34,797 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 000001.SZ 获取的记录数: 19
2025-05-17 19:24:34,806 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 成功获取数据，记录总数: 19
2025-05-17 19:24:34,807 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 保存数据到存储: symbol=000001.SZ, 记录数=19
2025-05-17 19:24:34,820 [INFO] CSVStorage [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [save] 合并数据并保存到CSV文件: /Users/gang/Workspace/cursor-workspace/quant-backtrace/data/daily/000001.SZ_daily.csv, 总条数: 445
2025-05-17 19:24:34,820 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 返回数据: symbol=000001.SZ, 记录数=19
2025-05-17 19:24:34,821 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 耗时: 0.426秒, 获取记录数: 19
2025-05-17 19:24:34,821 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 第二次调用 - 再次使用 000001 (应使用缓存)
2025-05-17 19:24:34,822 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 耗时: 0.000秒, 获取记录数: 19
2025-05-17 19:24:34,822 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 第三次调用 - 使用不同格式 000001.SZ (应使用相同缓存)
2025-05-17 19:24:34,822 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 请求数据: symbols=['000001.SZ'], start_date=2025-04-17, end_date=2025-05-17, freq=daily, use_cache=True
2025-05-17 19:24:34,824 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 从数据源获取数据: symbols=['000001.SZ'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:34,824 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 开始获取股票数据: symbols=['000001.SZ'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:34,825 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 正在获取股票 000001.SZ 的daily数据，进度: 1/1
2025-05-17 19:24:34,976 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 000001.SZ 数据获取成功，记录数: 19
2025-05-17 19:24:35,282 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 全部数据获取完成，总记录数: 19, 股票数: 1
2025-05-17 19:24:35,283 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 000001.SZ 获取的记录数: 19
2025-05-17 19:24:35,292 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 成功获取数据，记录总数: 19
2025-05-17 19:24:35,293 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 保存数据到存储: symbol=000001.SZ, 记录数=19
2025-05-17 19:24:35,304 [INFO] CSVStorage [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [save] 合并数据并保存到CSV文件: /Users/gang/Workspace/cursor-workspace/quant-backtrace/data/daily/000001.SZ_daily.csv, 总条数: 445
2025-05-17 19:24:35,304 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 返回数据: symbol=000001.SZ, 记录数=19
2025-05-17 19:24:35,305 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 耗时: 0.484秒, 获取记录数: 19
2025-05-17 19:24:35,305 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 缓存状态: 有效
2025-05-17 19:24:35,305 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 代码标准化: 无效
2025-05-17 19:24:35,305 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 
测试股票对: 600000 和 sh600000
2025-05-17 19:24:35,306 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 第一次调用 - 使用 600000
2025-05-17 19:24:35,306 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 股票代码已标准化: 600000 -> 600000.SH
2025-05-17 19:24:35,306 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 请求数据: symbols=['600000.SH'], start_date=2025-04-17, end_date=2025-05-17, freq=daily, use_cache=True
2025-05-17 19:24:35,306 [WARNING] CSVStorage [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5174) - [load] 文件不存在: /Users/gang/Workspace/cursor-workspace/quant-backtrace/data/daily/600000.SH_daily.csv
2025-05-17 19:24:35,306 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 缓存中未找到数据: symbol=600000.SH, freq=daily
2025-05-17 19:24:35,306 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 从数据源获取数据: symbols=['600000.SH'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:35,306 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 开始获取股票数据: symbols=['600000.SH'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:35,306 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 正在获取股票 600000.SH 的daily数据，进度: 1/1
2025-05-17 19:24:35,472 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 600000.SH 数据获取成功，记录数: 19
2025-05-17 19:24:35,778 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 全部数据获取完成，总记录数: 19, 股票数: 1
2025-05-17 19:24:35,781 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 600000.SH 获取的记录数: 19
2025-05-17 19:24:35,815 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 成功获取数据，记录总数: 19
2025-05-17 19:24:35,816 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 保存数据到存储: symbol=600000.SH, 记录数=19
2025-05-17 19:24:35,817 [INFO] CSVStorage [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [save] 保存数据到CSV文件: /Users/gang/Workspace/cursor-workspace/quant-backtrace/data/daily/600000.SH_daily.csv, 条数: 19
2025-05-17 19:24:35,817 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 返回数据: symbol=600000.SH, 记录数=19
2025-05-17 19:24:35,818 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 耗时: 0.513秒, 获取记录数: 19
2025-05-17 19:24:35,818 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 第二次调用 - 再次使用 600000 (应使用缓存)
2025-05-17 19:24:35,818 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 耗时: 0.000秒, 获取记录数: 19
2025-05-17 19:24:35,818 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 第三次调用 - 使用不同格式 sh600000 (应使用相同缓存)
2025-05-17 19:24:35,818 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 股票代码已标准化: sh600000 -> 600000.SH
2025-05-17 19:24:35,819 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 请求数据: symbols=['600000.SH'], start_date=2025-04-17, end_date=2025-05-17, freq=daily, use_cache=True
2025-05-17 19:24:35,821 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 从数据源获取数据: symbols=['600000.SH'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:35,821 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 开始获取股票数据: symbols=['600000.SH'], start_date=2025-04-17, end_date=2025-05-17, freq=daily
2025-05-17 19:24:35,821 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 正在获取股票 600000.SH 的daily数据，进度: 1/1
2025-05-17 19:24:35,901 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 600000.SH 数据获取成功，记录数: 19
2025-05-17 19:24:36,207 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 全部数据获取完成，总记录数: 19, 股票数: 1
2025-05-17 19:24:36,209 [INFO] AKShareFetcher [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [fetch_data] 股票 600000.SH 获取的记录数: 19
2025-05-17 19:24:36,215 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 成功获取数据，记录总数: 19
2025-05-17 19:24:36,216 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 保存数据到存储: symbol=600000.SH, 记录数=19
2025-05-17 19:24:36,224 [INFO] CSVStorage [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [save] 合并数据并保存到CSV文件: /Users/gang/Workspace/cursor-workspace/quant-backtrace/data/daily/600000.SH_daily.csv, 总条数: 19
2025-05-17 19:24:36,226 [INFO] DataAPI [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [get_price] 返回数据: symbol=600000.SH, 记录数=19
2025-05-17 19:24:36,227 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 耗时: 0.409秒, 获取记录数: 19
2025-05-17 19:24:36,227 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 缓存状态: 有效
2025-05-17 19:24:36,227 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 代码标准化: 无效
2025-05-17 19:24:36,228 [INFO] test_stock_codes_cache [46475] (/Users/gang/Workspace/cursor-workspace/quant-backtrace/quantitative_trading_system/utils/logger.py:5171) - [test_stock_codes_and_cache] 
测试完成
